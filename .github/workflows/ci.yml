name: CI Checks # Renamed workflow

on:
  push:
    branches: [ main ] # Trigger on pushes to main
  pull_request:
    branches: [ main ] # Trigger on PRs targeting main

jobs:
  # Shellcheck job removed as it does not support Zsh scripts (SC1071)
  bats_test: # Job for running tests
    name: Run Bats Tests
    # Removed 'needs: shellcheck' as the shellcheck job is gone
    runs-on: ubuntu-latest

    steps:
    - name: Check out code
      uses: actions/checkout@v4

    - name: Set up Bats
      uses: bats-core/bats-action@2.0.0 # Action to install bats-core and helpers
      # Installs bats, bats-support, bats-assert

    - name: Ensure script is executable
      run: chmod +x ./scripts/find-missing-casks.sh

    - name: Run Bats tests
      run: bats tests # Run all .bats files in the tests directory